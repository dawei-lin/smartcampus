<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title></title>
<link type="text/css" rel="stylesheet" href="/smartcampus/css/common.css" />
<link type="text/css" rel="stylesheet" href="/smartcampus/css/yhdcss.css" />
<link type="text/css" rel="stylesheet" href="/smartcampus/script/jquery.yhd.message/jquery.yhd.message.css" />
<link type="text/css" rel="stylesheet" href="/smartcampus/script/jquery.yhd.dialog/jquery.yhd.dialog.css" />
<link type="text/css" rel="stylesheet" href="/smartcampus/script/jquery.yhd.tree/jquery.yhd.tree.css?v=350" />

<style type="text/css">

</style>
<script type="text/javascript" src="/smartcampus/script/jquery.min.js"></script>
<script type="text/javascript" src="/smartcampus/script/jquery.yhd.system.min.js"></script>
<script type="text/javascript" src="/smartcampus/script/jquery.yhd.message/jquery.yhd.message.js"></script>
<script type="text/javascript" src="/smartcampus/script/jquery.yhd.dialog/jquery.yhd.dialog.js"></script>
<script type="text/javascript" src="/smartcampus/script/jquery.yhd.form/jquery.yhd.form.js?v=350"></script>
<script type="text/javascript" src="/smartcampus/script/jquery.yhd.tree/jquery.yhd.tree.js?v=350"></script>

<script type="text/javascript">
var flagType;
var id=Request("id");

$(document).ready(function(){


$("[id=tree1]").tree({url:"/smartcampus/roleInfo/permission/"+id+"",icons:false,textField:'menuname',expand:false,parentField:'pid',lines:false,selectField:'tick',valueField:'id',type:'ajax',checkbox:true});$(document.body).on("click", "[id=c2_0_0_3]", function(){
$.ajax({
	type:"POST",
	url:"/smartcampus/roleInfo/updatePermission",
	dataType:"",
	timeout:-1,
	headers:{},
	traditional:true,
	xhrFields: {withCredentials: true},
	crossDomain: true,
	data:{rid:""+id+"",pids:$('[id=tree1]').tree('getSelected',{type:'checkedall'})},
	beforeSend:function (XMLHttpRequest) {},
	success:function (data, textStatus) {parent.$.alert({msg:"保存成功"});parent.$.dialog.close();},
	error:function (XMLHttpRequest, textStatus, errorThrown){parent.$.alert({msg:"保存失败"});},
	complete:function (XMLHttpRequest, textStatus) {}
});
});

$(document.body).on("click", "[id=c2_0_0_4]", function(){
parent.$.dialog.close();
});


});

</script>
</head>
<body id="jiaosequanxianfenpei" style="">

<div class="ClearAll  RELATIVE ANYROW ABSROW-1" style="padding-left:25px;padding-top:25px;min-height:230px;"  ><div class="ANYFORMVIEW P_ANYFORMVIEW P_ANYFORMVIEW_1 P_FORMVIEW_1 " style="width:350px;min-height:360px;"id="c2_0" name="c2_0">

<div class="ClearAll  RELATIVE ANYROW_1 ABSROW-1_1" style=""  ><img src="images/15.png" style="width:10px;height:10px;margin-top:4px;"id="c2_0_0_0" name="c2_0_0_0"/>
<span style="font-weight:700;padding-left:5px;"id="c2_0_0_1" name="c2_0_0_1">角色权限分配</span>
<div class="ClearAll"></div>
</div>
<div class="ClearAll  RELATIVE ANYROW_1 ABSROW-2_1" style="padding-bottom:10px;padding-left:10px;padding-top:10px;"  ><div class="ANYTREEVIEW P_ANYTREEVIEW P_ANYTREEVIEW_2 P_TREEVIEW_2  tree" style="width:300px;height:250px;overflow-y:scroll;"id="tree1" name="tree1">
</div>
<div class="ClearAll"></div>
</div>
<div class="ClearAll  RELATIVE ANYROW_1 ABSROW-3_1" style=""  ><button type="button" style="color:#FFFFFF;float:left;width:90px;margin-right:25px;height:30px;background-color:#80B764;"id="c2_0_0_3" name="c2_0_0_3">确定</button>
<button type="button" style="float:left;width:90px;height:30px;"id="c2_0_0_4" name="c2_0_0_4">关闭</button>
<div class="ClearAll"></div>
</div></div>
<div class="ClearAll"></div>
</div>
</body>
</html>